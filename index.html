<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>有心之士的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="有心之士的个人博客">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="有心之士的个人博客">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Xu ZhiXing">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="有心之士的个人博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">有心之士的个人博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-ECMA6-11-3-Map" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/09/19/ECMA6-11-3-Map/" class="article-date">
  <time class="dt-published" datetime="2023-09-19T14:08:24.000Z" itemprop="datePublished">2023-09-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/09/19/ECMA6-11-3-Map/">ECMA6_11.3_Map</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="11-3Map"><a href="#11-3Map" class="headerlink" title="11.3	Map"></a>11.3	Map</h3><h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">set</span>([<span class="string">&#x27;a&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>([<span class="string">&#x27;a&#x27;</span>]));</span><br><span class="line"></span><br><span class="line"><span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h4 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h4><p>在这段程序中，首先创建了一个新的 Map 对象，并将其赋值给变量 map。接下来，使用 <code>set</code> 方法将一个键为 [‘a’]，值为 555 的键值对添加到 Map 中。</p>
<p>然而，问题出现在 <code>console.log</code> 语句。它尝试通过 <code>get</code> 方法获取与键 [‘a’] 相关联的值。然而，此处使用了不同的数组实例作为键，而不是之前用于添加键值对的数组实例。</p>
<p>在 JavaScript 中，数组是引用类型。虽然两个数组看起来相同（元素相同），但它们实际上是不同的对象。因此，尽管两个数组的元素相同，它们在内存中的位置不同，被视为不同的键。</p>
<p>因此，当使用 <code>get</code> 方法时，传递给它的是一个新的数组实例，而不是添加键值对时使用的相同数组实例。这导致 Map 无法找到与新数组实例 [‘a’] 相关联的值，因此会返回 undefined。</p>
<p>要解决这个问题，你可以在 <code>get</code> 方法中使用与添加键值对时相同的数组实例，如下所示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"><span class="keyword">const</span> key = [<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">set</span>(key, <span class="number">555</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(key));</span><br></pre></td></tr></table></figure>

<p>JavaScript 中的数组是引用类型，因为它们是基于对象的数据类型。JavaScript 中有两种主要的数据类型：原始类型和引用类型。</p>
<ol>
<li>原始类型（Primitive Types）：包括数字（number）、字符串（string）、布尔值（boolean）、null、undefined 和 Symbol。原始类型的值直接存储在变量中，它们的赋值是按值传递的，即将值复制到新变量中。</li>
<li>引用类型（Reference Types）：包括对象（Object）、数组（Array）、函数（Function）等。引用类型的值保存在堆内存中，而变量中存储的是对该内存地址的引用。当我们复制引用类型的变量时，复制的是引用，而不是实际的值。</li>
</ol>
<p>在 JavaScript 中，数组被视为对象的特殊形式。它们可以容纳多个值，并且可以通过索引来访问和操作这些值。由于数组是对象，它们也具有对象的特性，例如可以通过属性和方法进行操作。</p>
<p>当我们创建一个数组时，实际上在内存中分配了一块空间来存储数组的值，并且变量中存储的是对该内存地址的引用。这意味着，当我们将一个数组赋值给另一个变量时，实际上是将引用复制到新变量中，而不是复制数组的内容。因此，原始数组和新变量引用的是同一块内存空间，它们指向相同的数组对象。</p>
<p>由于引用类型的复制是按引用传递的，所以当多个变量引用同一个数组时，它们都指向相同的内存地址。这也意味着对数组进行修改时，所有引用该数组的变量都会反映这些修改，因为它们实际上引用的是同一个数组对象。</p>
<p>总结起来，JavaScript 中的数组是引用类型，因为它们是对象，变量存储的是对数组对象的引用，而不是实际的数组值。这种引用机制使得数组可以被多个变量共享和修改。</p>
<h4 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line">map.<span class="title function_">set</span>(-<span class="number">0</span>, <span class="number">123</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map.<span class="title function_">get</span>(+<span class="number">0</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 123</span></span><br></pre></td></tr></table></figure>

<h4 id="解析-1"><a href="#解析-1" class="headerlink" title="解析"></a>解析</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(+<span class="number">0</span> === -<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">NaN</span> === <span class="title class_">NaN</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>如果 <code>Map</code> 的键是一个简单类型的值（数字、字符串、布尔值），则只要两个值严格相等，<code>Map</code> 就将其视为一个键，包括 <code>+0</code> 和 <code>-0</code> 。另外，虽然 <code>NaN</code> 不严格等于自身，但Map将其视为同一个键。</p>
<h5 id="2023-9-19"><a href="#2023-9-19" class="headerlink" title="(2023-9-19)"></a>(2023-9-19)</h5>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/09/19/ECMA6-11-3-Map/" data-id="clmqffzch0001islq61rsa3cy" data-title="ECMA6_11.3_Map" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ECMA6-Map/" rel="tag">ECMA6, Map</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-19、文件上传" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/15/19%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" class="article-date">
  <time class="dt-published" datetime="2023-07-14T18:04:55.971Z" itemprop="datePublished">2023-07-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="19、文件上传"><a href="#19、文件上传" class="headerlink" title="19、文件上传"></a>19、文件上传</h2><h4 id="单文件"><a href="#单文件" class="headerlink" title="单文件"></a>单文件</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	router.POST(<span class="string">&quot;/upload&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		fileHeader, err := c.FormFile(<span class="string">&quot;file&quot;</span>)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(fileHeader.Filename)</span><br><span class="line">		fmt.Println(fileHeader.Size) <span class="comment">// 单位字节</span></span><br><span class="line"></span><br><span class="line">		err = c.SaveUploadedFile(fileHeader, <span class="string">&quot;./static/&quot;</span>+fileHeader.Filename) <span class="comment">// 保存到指定目录下面</span></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;Msg&quot;</span>: <span class="string">&quot;Upload successfully!&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="服务端保存文件的几种方式"><a href="#服务端保存文件的几种方式" class="headerlink" title="服务端保存文件的几种方式"></a>服务端保存文件的几种方式</h4><h5 id="SaveUploadedFile"><a href="#SaveUploadedFile" class="headerlink" title="SaveUploadedFile"></a>SaveUploadedFile</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">err = c.SaveUploadedFile(fileHeader, <span class="string">&quot;./static/&quot;</span>+fileHeader.Filename)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">	log.Println(err)</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 文件对象 文件路径，注意要从项目根路径开始写</span></span><br></pre></td></tr></table></figure>

<h5 id="Create-Copy"><a href="#Create-Copy" class="headerlink" title="Create + Copy"></a>Create + Copy</h5><p><code>file.Open</code> 的第一个返回值就是我们讲文件对象中的那个文件（只读的），我们可以使用这个去直接读取文件内容</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	router.POST(<span class="string">&quot;/upload&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		fileHeader, err := c.FormFile(<span class="string">&quot;file&quot;</span>)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		readerFile, err := fileHeader.Open()</span><br><span class="line">		data, err := io.ReadAll(readerFile)</span><br><span class="line"></span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;Msg&quot;</span>:  <span class="string">&quot;Upload successfully!&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Data&quot;</span>: <span class="type">string</span>(data),</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>创建文件并进行拷贝</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">fileHeader, err := c.FormFile(<span class="string">&quot;file&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.<span class="built_in">println</span>(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件中的数据，返回文件对象</span></span><br><span class="line">fileReader, err := fileHeader.Open()</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.<span class="built_in">println</span>(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个文件</span></span><br><span class="line">dst := <span class="string">&quot;./&quot;</span> + fileHeader.Filename</span><br><span class="line">fileOuter, err := os.Create(dst)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.<span class="built_in">println</span>(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">defer</span> fileOuter.Close()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拷贝文件对象到 fileOuter 中</span></span><br><span class="line">io.Copy(fileOuter, fileReader)</span><br></pre></td></tr></table></figure>

<p>具体代码</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;io&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	router.POST(<span class="string">&quot;/upload&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		fileHeader, err := c.FormFile(<span class="string">&quot;file&quot;</span>)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		readerFile, err := fileHeader.Open()</span><br><span class="line"></span><br><span class="line">		writerFile, err := os.Create(<span class="string">&quot;./static/&quot;</span>+fileHeader.Filename)</span><br><span class="line">		<span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">(writerFile *os.File)</span></span> &#123;</span><br><span class="line">			err := writerFile.Close()</span><br><span class="line">			<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">				log.Println(err)</span><br><span class="line">				<span class="keyword">return</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;(writerFile)</span><br><span class="line">		num, err := io.Copy(writerFile, readerFile)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;Msg&quot;</span>:  <span class="string">&quot;Upload successfully!&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Data&quot;</span>: num,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="读取上传的文件"><a href="#读取上传的文件" class="headerlink" title="读取上传的文件"></a>读取上传的文件</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fileHeader, err := c.FormFile(<span class="string">&quot;file&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    log.<span class="built_in">println</span>(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取文件中的数据，返回文件对象</span></span><br><span class="line">fileReader, err := fileHeader.Open()</span><br><span class="line">data, err := io.ReadAll(fileReader)</span><br><span class="line">fmt.<span class="built_in">println</span>(<span class="type">string</span>(data))</span><br></pre></td></tr></table></figure>

<p>可以基于文件中内容，判断是否需要保存到服务器</p>
<h4 id="多文件上传"><a href="#多文件上传" class="headerlink" title="多文件上传"></a>多文件上传</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	router.POST(<span class="string">&quot;/upload&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		fileHeaders, err := c.MultipartForm()</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		fileReaders, existed := fileHeaders.File[<span class="string">&quot;files&quot;</span>]</span><br><span class="line">		<span class="keyword">if</span> existed &#123;</span><br><span class="line">			<span class="keyword">for</span> _, fileReader := <span class="keyword">range</span> fileReaders &#123;</span><br><span class="line">				err := c.SaveUploadedFile(fileReader, <span class="string">&quot;./static/&quot;</span>+fileReader.Filename)</span><br><span class="line">				<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">					log.Println(err)</span><br><span class="line">					<span class="keyword">return</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;Msg&quot;</span>: <span class="string">&quot;not exist&quot;</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;Msg&quot;</span>:  <span class="string">&quot;Upload successfully!&quot;</span>,</span><br><span class="line">			<span class="string">&quot;Data&quot;</span>: <span class="built_in">len</span>(fileReaders),</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:8080&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/07/15/19%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/" data-id="clmqffzcd0000islqh7184dm3" data-title="" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Golang/" rel="tag">Golang</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-Gin" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/06/22/Gin/" class="article-date">
  <time class="dt-published" datetime="2023-06-22T09:17:28.000Z" itemprop="datePublished">2023-06-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/06/22/Gin/">高性能web框架gin</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Gin框架"><a href="#Gin框架" class="headerlink" title="Gin框架"></a>Gin框架</h1><h2 id="请求参数"><a href="#请求参数" class="headerlink" title="请求参数"></a>请求参数</h2><h4 id="8、查询参数-Query"><a href="#8、查询参数-Query" class="headerlink" title="8、查询参数 Query"></a>8、查询参数 Query</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> _<span class="title">query</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">//user := c.Query(&quot;user&quot;)</span></span><br><span class="line">	<span class="comment">//if user == &quot;&quot; &#123;</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="comment">// http://localhost/query?id=1&amp;user=Xu</span></span><br><span class="line">	<span class="comment">//fmt.Println(user)</span></span><br><span class="line">	fmt.Println(c.GetQuery(<span class="string">&quot;user&quot;</span>))</span><br><span class="line">	<span class="comment">// 拿到多个相同的查询参数</span></span><br><span class="line">	<span class="comment">// http://localhost/query?id=1&amp;user=Xu&amp;user=Zu</span></span><br><span class="line">	fmt.Println(c.QueryArray(<span class="string">&quot;user&quot;</span>))</span><br><span class="line">	<span class="comment">// http://localhost/query?user[id]=1&amp;user[name]=Xu</span></span><br><span class="line">	fmt.Println(c.QueryMap(<span class="string">&quot;user&quot;</span>))</span><br><span class="line">    <span class="comment">// 如果没查询到，则使用默认值</span></span><br><span class="line">	fmt.Println(c.DefaultQuery(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;default&quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9、动态参数-Param"><a href="#9、动态参数-Param" class="headerlink" title="9、动态参数 Param"></a>9、动态参数 Param</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> _<span class="title">param</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 除路径符号之外</span></span><br><span class="line">	fmt.Println(c.Param(<span class="string">&quot;user_id&quot;</span>))</span><br><span class="line">	fmt.Println(c.Param(<span class="string">&quot;book_id&quot;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">router.GET(<span class="string">&quot;/param/:user_id&quot;</span>, _param)</span><br><span class="line">router.GET(<span class="string">&quot;/param/:user_id/:book_id&quot;</span>, _param)</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://localhost/param/zim/123</span></span><br><span class="line"><span class="comment">// 谁在前面谁就先进行匹配</span></span><br></pre></td></tr></table></figure>

<h4 id="10、表单参数-PostForm"><a href="#10、表单参数-PostForm" class="headerlink" title="10、表单参数 PostForm"></a>10、表单参数 PostForm</h4><p>涉及文件上传</p>
<p>可以接收 <code>multipart/form-data</code> 和 <code>application/x-www-form-urlencoded </code> 。</p>
<p>通过form-data上传时存在文件则会添加 <code>boundary=&lt;calculated when request is sent&gt;</code> 类型。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// form-data</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> _<span class="title">form</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 接收单个（第一个）</span></span><br><span class="line">	fmt.Println(c.PostForm(<span class="string">&quot;name&quot;</span>))</span><br><span class="line">	<span class="comment">// 接收多个</span></span><br><span class="line">	fmt.Println(c.PostFormArray(<span class="string">&quot;name&quot;</span>))</span><br><span class="line">	<span class="comment">// 如果用户没传(没传不是为空)，就使用默认值</span></span><br><span class="line">	fmt.Println(c.DefaultPostForm(<span class="string">&quot;addr&quot;</span>, <span class="string">&quot;江西省&quot;</span>))</span><br><span class="line">	<span class="comment">// 接收所有的form参数，包括文件</span></span><br><span class="line">	form, err := c.MultipartForm()</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(form)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">router.POST(<span class="string">&quot;/form&quot;</span>, _form)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 进行post操作，上传参数或文件</span></span><br></pre></td></tr></table></figure>

<h4 id="11、原始参数-GetRawData"><a href="#11、原始参数-GetRawData" class="headerlink" title="11、原始参数 GetRawData"></a>11、原始参数 GetRawData</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> _<span class="title">raw</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">    contentType := c.GetHeader(<span class="string">&quot;Content-Type&quot;</span>)</span><br><span class="line">	fmt.Println(contentType)</span><br><span class="line">	<span class="comment">//fmt.Println(c.GetRawData())</span></span><br><span class="line">	data, _ := c.GetRawData()</span><br><span class="line">	fmt.Println(<span class="type">string</span>(data))</span><br><span class="line">    <span class="comment">//switch contentType &#123;</span></span><br><span class="line">	<span class="comment">//case &quot;application/json&quot;:</span></span><br><span class="line">	<span class="comment">//	fmt.Println(string(data))</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Content-Type</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 解析原始参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> _<span class="title">raw</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	contentType := c.GetHeader(<span class="string">&quot;Content-Type&quot;</span>)</span><br><span class="line">	<span class="comment">//fmt.Println(contentType)</span></span><br><span class="line">	data, _ := c.GetRawData()</span><br><span class="line">    <span class="comment">// 根据Content-Type进行判断</span></span><br><span class="line">	<span class="keyword">switch</span> contentType &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;application/json&quot;</span>:</span><br><span class="line">        <span class="comment">// json解析到结构体</span></span><br><span class="line">		<span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">			Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">			Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">var</span> user User</span><br><span class="line">		<span class="comment">// 如果不匹配，按照字母匹配进行解析（大写字母与小写字母对应）</span></span><br><span class="line">		err := json.Unmarshal(data, &amp;user)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//fmt.Println(string(data))</span></span><br><span class="line">		fmt.Println(user)</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p><strong>封装解析函数</strong>（解析json到结构体上）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">bindJson</span><span class="params">(c *gin.Context, obj any)</span></span> (err <span class="type">error</span>) &#123;</span><br><span class="line">	data, _ := c.GetRawData()</span><br><span class="line">	contentType := c.GetHeader(<span class="string">&quot;Content-Type&quot;</span>)</span><br><span class="line">	<span class="keyword">switch</span> contentType &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;application/json&quot;</span>:</span><br><span class="line">		err = json.Unmarshal(data, obj)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span> err</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> _<span class="title">raw</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">		Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">		Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> user User</span><br><span class="line">	err := bindJson(c, &amp;user)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err.Error())</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(user)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>application&#x2F;x-www-form-urlencoded</strong></p>
<p>以URL形式进行编码</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name=abc</span></span><br><span class="line"><span class="comment">// name=abc&amp;age=23</span></span><br></pre></td></tr></table></figure>

<p><strong>form-data</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//----------------------------004054477479735315254045</span></span><br><span class="line"><span class="comment">//Content-Disposition: form-data; name=&quot;name&quot;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//abc</span></span><br><span class="line"><span class="comment">//----------------------------004054477479735315254045--</span></span><br></pre></td></tr></table></figure>

<p><strong>application&#x2F;json</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//	&quot;name&quot;: &quot;Xu ZhiXing&quot;,</span></span><br><span class="line"><span class="comment">//	&quot;age&quot;: 23</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="翻转字符串（面试题）"><a href="#翻转字符串（面试题）" class="headerlink" title="翻转字符串（面试题）"></a>翻转字符串（面试题）</h4><h5 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h5><p>请实现一个算法，在不使用【额外数据结构和储存空间】的情况下，翻转一个给定的字符串(可以使用单个变量)。</p>
<p>给定一个string，请返回一个string，为翻转后的字符串。保证字符串的长度小于等于5000。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字符串对应16字节大小的reflect.StringHeader结构体</span></span><br><span class="line"><span class="keyword">type</span> StringHeader <span class="keyword">struct</span> &#123;</span><br><span class="line">	Data <span class="type">uintptr</span></span><br><span class="line">	Len  <span class="type">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从汇编角度看，Name变量其实对应的是reflect.StringHeader结构体类型。前8个字节对应底层真实字符串数据的指针，也就是符号go.string.”gopher”对应的地址。后八个字节对应底层真实字符串数据的有效长度。</p>
<h5 id="问题解答"><a href="#问题解答" class="headerlink" title="问题解答"></a>问题解答</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reverseStr</span><span class="params">(s *<span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="comment">// utf-8 4个字节 = 32位</span></span><br><span class="line">	strS := []<span class="type">int32</span>(*s)</span><br><span class="line"></span><br><span class="line">	length := <span class="built_in">len</span>(strS)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> length &gt; <span class="number">5000</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> key, _ := <span class="keyword">range</span> strS &#123;</span><br><span class="line">		<span class="keyword">if</span> key &gt; length/<span class="number">2</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		strS[key], strS[length-key<span class="number">-1</span>] = strS[length-key<span class="number">-1</span>], strS[key]</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//ss := string(strS)</span></span><br><span class="line">	<span class="comment">// 不是把指针改变（原来的数据还是保存在原来的地址）（改变现有的指针只是指向新的值）</span></span><br><span class="line">	<span class="comment">//s = &amp;ss</span></span><br><span class="line">	<span class="comment">// 赋给指针指向的值</span></span><br><span class="line">	<span class="comment">//*s = ss</span></span><br><span class="line">	*s = <span class="type">string</span>(strS)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s <span class="type">string</span></span><br><span class="line">	_, err := fmt.Scan(&amp;s)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	reverseStr(&amp;s)</span><br><span class="line">	fmt.Println(s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="源码参考"><a href="#源码参考" class="headerlink" title="源码参考"></a>源码参考</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reverString</span><span class="params">(s <span class="type">string</span>)</span></span> (<span class="type">string</span>, <span class="type">bool</span>) &#123;</span><br><span class="line">    <span class="comment">// type rune = int32</span></span><br><span class="line">    str := []<span class="type">rune</span>(s)</span><br><span class="line">    l := <span class="built_in">len</span>(str)</span><br><span class="line">    <span class="keyword">if</span> l &gt; <span class="number">5000</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> s, <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; l/<span class="number">2</span>; i++ &#123;</span><br><span class="line">        str[i], str[l - i - <span class="number">1</span>] = str[l - i <span class="number">-1</span>], str[i]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">string</span>(str), <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="12、四大请求方式"><a href="#12、四大请求方式" class="headerlink" title="12、四大请求方式"></a>12、四大请求方式</h2><p>Restful风格指的是网络应用中就是资源定位和资源操作的风格，不是标准也不是协议。</p>
<p>GET：从服务器取出资源（一项或者多项）</p>
<p>POST：在服务器新建一个资源</p>
<p>PUT：在服务器更新资源（客户端提供完整资源数据）</p>
<p>PATCH：在服务器更新资源（客户端提供需要修改的资源数据）</p>
<p>DELETE：从服务器删除资源</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 以文章资源为例</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// GET /articles 文章列表</span></span><br><span class="line"><span class="comment">// GET /articles/:id 文章详情</span></span><br><span class="line"><span class="comment">// POST /articles 添加文章</span></span><br><span class="line"><span class="comment">// PUT /article/:id 修改某一篇文章</span></span><br><span class="line"><span class="comment">// DELETE /articles/:id 删除某一篇文章</span></span><br></pre></td></tr></table></figure>

<h4 id="局限性"><a href="#局限性" class="headerlink" title="局限性"></a>局限性</h4><p>批量删除等操作</p>
<h4 id="具体代码实现"><a href="#具体代码实现" class="headerlink" title="具体代码实现"></a>具体代码实现</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;encoding/json&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ArticleModel <span class="keyword">struct</span> &#123;</span><br><span class="line">	Title   <span class="type">string</span> <span class="string">`json:&quot;title&quot;`</span></span><br><span class="line">	Content <span class="type">string</span> <span class="string">`json:&quot;content&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Response <span class="keyword">struct</span> &#123;</span><br><span class="line">	Code <span class="type">int</span>    <span class="string">`json:&quot;code&quot;`</span></span><br><span class="line">	Data any    <span class="string">`json:&quot;data&quot;`</span></span><br><span class="line">	Msg  <span class="type">string</span> <span class="string">`json:&quot;msg&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> articleList = []ArticleModel&#123;</span><br><span class="line">	&#123;<span class="string">&quot;Go语言入门&quot;</span>, <span class="string">&quot;这篇文章是xxx&quot;</span>&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;Python语言入门&quot;</span>, <span class="string">&quot;这篇文章是yyy&quot;</span>&#125;,</span><br><span class="line">	&#123;<span class="string">&quot;JavaScript语言入门&quot;</span>, <span class="string">&quot;这篇文章是zzz&quot;</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可能涉及权限验证，参数多样性</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取文章列表</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> _<span class="title">getList</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 包含搜索、分页、关键词</span></span><br><span class="line">	c.JSON(http.StatusOK, Response&#123;<span class="number">0</span>, articleList, <span class="string">&quot;成功&quot;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取文章详情</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> _<span class="title">getDetail</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 获取 params 中ID</span></span><br><span class="line">	fmt.Println(c.Param(<span class="string">&quot;id&quot;</span>))</span><br><span class="line"></span><br><span class="line">	num, err := strconv.Atoi(c.Param(<span class="string">&quot;id&quot;</span>))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> num &gt; <span class="built_in">len</span>(articleList)<span class="number">-1</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Wrong ID!&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	c.JSON(http.StatusOK, Response&#123;Code: <span class="number">0</span>, Data: articleList[num], Msg: <span class="string">&quot;成功&quot;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加文章</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> _<span class="title">create</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 接收前端传递来的json数据</span></span><br><span class="line">	data, _ := c.GetRawData()</span><br><span class="line">	contentType := c.GetHeader(<span class="string">&quot;Content-Type&quot;</span>)</span><br><span class="line">	<span class="keyword">var</span> article ArticleModel</span><br><span class="line">	<span class="keyword">switch</span> contentType &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;application/json&quot;</span>:</span><br><span class="line">		err := json.Unmarshal(data, &amp;article)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(article)</span><br><span class="line">	&#125;</span><br><span class="line">	articleList = <span class="built_in">append</span>(articleList, article)</span><br><span class="line">	c.JSON(http.StatusOK, Response&#123;Code: http.StatusOK, Data: article, Msg: <span class="string">&quot;添加成功&quot;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改文章</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> _<span class="title">update</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 获取 params 中ID</span></span><br><span class="line">	fmt.Println(c.Param(<span class="string">&quot;id&quot;</span>))</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 接收前端传递过来的数据</span></span><br><span class="line">	data, _ := c.GetRawData()</span><br><span class="line">	contentType := c.GetHeader(<span class="string">&quot;Content-Type&quot;</span>)</span><br><span class="line">	<span class="keyword">var</span> article ArticleModel</span><br><span class="line">	<span class="keyword">switch</span> contentType &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="string">&quot;application/json&quot;</span>:</span><br><span class="line">		err := json.Unmarshal(data, &amp;article)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	num, err := strconv.Atoi(c.Param(<span class="string">&quot;id&quot;</span>))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> num &gt; <span class="built_in">len</span>(articleList)<span class="number">-1</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Wrong ID!&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	articleList[num].Title = article.Title</span><br><span class="line">	articleList[num].Content = article.Content</span><br><span class="line"></span><br><span class="line">	c.JSON(http.StatusOK, Response&#123;Code: http.StatusOK, Data: articleList, Msg: <span class="string">&quot;修改成功&quot;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除文章</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> _<span class="title">delete</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 获取 params 中的参数</span></span><br><span class="line">	fmt.Println(c.Param(<span class="string">&quot;id&quot;</span>))</span><br><span class="line"></span><br><span class="line">	num, err := strconv.Atoi(c.Param(<span class="string">&quot;id&quot;</span>))</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> num &gt; <span class="built_in">len</span>(articleList)<span class="number">-1</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Wrong ID!&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	articleList = <span class="built_in">append</span>(articleList[:num<span class="number">-1</span>], articleList[num:]...)</span><br><span class="line"></span><br><span class="line">	c.JSON(http.StatusOK, Response&#123;Code: http.StatusOK, Data: articleList, Msg: <span class="string">&quot;删除成功&quot;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	router.GET(<span class="string">&quot;/articles&quot;</span>, _getList)</span><br><span class="line">	router.GET(<span class="string">&quot;/articles/:id&quot;</span>, _getDetail)</span><br><span class="line">	router.POST(<span class="string">&quot;/articles&quot;</span>, _create)</span><br><span class="line">	router.PUT(<span class="string">&quot;/articles/:id&quot;</span>, _update)</span><br><span class="line">	router.DELETE(<span class="string">&quot;/articles/:id&quot;</span>, _delete)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:80&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="13、请求头相关"><a href="#13、请求头相关" class="headerlink" title="13、请求头相关"></a>13、请求头相关</h4><p>涉及到权限验证（反爬虫处理 User-Agent）</p>
<p><strong>请求头参数获取</strong></p>
<p><code>GetHeader</code> 可以大小写不区分，且返回切片中第一个匹配的数据</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 请求头的各种获取方式</span></span><br><span class="line">	router.GET(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="comment">// 大小写不区分，单词与单词之间用 - 连接</span></span><br><span class="line">		<span class="comment">// 用于获取单个请求头</span></span><br><span class="line">		<span class="comment">//fmt.Println(c.GetHeader(&quot;User-Agent&quot;))</span></span><br><span class="line">		<span class="comment">//fmt.Println(c.GetHeader(&quot;user-agent&quot;))</span></span><br><span class="line">		<span class="comment">//fmt.Println(c.GetHeader(&quot;user-aGent&quot;))</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// Header 是一个普通的 map[string]string&#123;&#125;</span></span><br><span class="line">		<span class="comment">//fmt.Println(c.Request.Header)</span></span><br><span class="line">		<span class="comment">// 如果是使用 .Get 方法或者是.GetHeader，那么可以不用区分大小写，并且返回第一个value</span></span><br><span class="line">		<span class="comment">//fmt.Println(c.Request.Header.Get(&quot;User-Agent&quot;))</span></span><br><span class="line">		<span class="comment">// 如果是用 map 的取值方式，需要注意大小写的问题</span></span><br><span class="line">		<span class="comment">//fmt.Println(c.Request.Header[&quot;User-Agent&quot;])</span></span><br><span class="line">		<span class="comment">//fmt.Println(c.Request.Header[&quot;user-agent&quot;])</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">// 自定义的请求头，用 .Get 方法也是免大小写的</span></span><br><span class="line">		fmt.Println(c.Request.Header.Get(<span class="string">&quot;Token&quot;</span>))</span><br><span class="line">		fmt.Println(c.Request.Header.Get(<span class="string">&quot;token&quot;</span>))</span><br><span class="line"></span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;msg&quot;</span>: <span class="string">&quot;成功&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 爬虫和用户区别对待</span></span><br><span class="line">	router.GET(<span class="string">&quot;/index&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		userAgent := c.GetHeader(<span class="string">&quot;User-Agent&quot;</span>)</span><br><span class="line">		<span class="comment">// 用正则去匹配</span></span><br><span class="line">		<span class="comment">// 字符串的包含匹配</span></span><br><span class="line">		<span class="keyword">if</span> strings.Contains(userAgent, <span class="string">&quot;python&quot;</span>) &#123;</span><br><span class="line">			<span class="comment">// 爬虫</span></span><br><span class="line">			c.JSON(<span class="number">0</span>, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;data&quot;</span>: <span class="string">&quot;爬虫&quot;</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;data&quot;</span>: <span class="string">&quot;用户&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:80&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="响应头相关"><a href="#响应头相关" class="headerlink" title="响应头相关"></a>响应头相关</h4><p><strong>设置响应头</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置响应头</span></span><br><span class="line">	router.GET(<span class="string">&quot;/res&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		c.Header(<span class="string">&quot;Token&quot;</span>, <span class="string">&quot;sq28r324rq3wqf&quot;</span>)</span><br><span class="line">		c.Header(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/text&quot;</span>)</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;data&quot;</span>: <span class="string">&quot;header-response&quot;</span>,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="搭建服务器Go环境"><a href="#搭建服务器Go环境" class="headerlink" title="搭建服务器Go环境"></a>搭建服务器Go环境</h2><h4 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43959184/article/details/116828972">(27条消息) 阿里云服务器搭建Golang运行环境_购买阿里服务器配置go开发环境__________九九_________的博客-CSDN博客</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Shitking/article/details/123189530">(27条消息) 如何在CENTOS以及阿里云ECS上安装go及gin框架_Shitking的博客-CSDN博客</a></p>
<p>[(27条消息) 阿里云服务器 安全组 防火墙 开放端口流程_謝逅相遇的博客-CSDN博客](<a target="_blank" rel="noopener" href="https://blog.csdn.net/xiehou_xie/article/details/113998552#:~:text=%E9%98%BF%E9%87%8C%E4%BA%91%E5%AE%89%E5%85%A8%E7%BB%84">https://blog.csdn.net/xiehou_xie/article/details/113998552#:~:text=阿里云安全组</a> 1 1. 找到对应的系统实例并选中 博主的实例就是在华北2中%2C选中后就可以获得实例的具体信息 2 2. 通过,服务器防火墙 通过防火墙有两种方案%3A 注%3A 方案实测适用于Centos7%2C对于Centos6等不做保证 1. 直接关闭防火墙 此方案简单且粗暴%2C虽然并不建议此方案%2C但为了大家方便%2C还是演示如下%3A )</p>
<p><a target="_blank" rel="noopener" href="https://ecs.console.aliyun.com/server/region/cn-hangzhou#/server/region/cn-hangzhou">https://ecs.console.aliyun.com/server/region/cn-hangzhou#/server/region/cn-hangzhou</a></p>
<h4 id="具体命令"><a href="#具体命令" class="headerlink" title="具体命令"></a>具体命令</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下载Golang压缩包</span></span><br><span class="line">wget -c https:<span class="comment">//dl.google.com/go/go1.19.4.linux-amd64.tar.gz</span></span><br><span class="line"><span class="comment">// 进行解压并指定解压路径</span></span><br><span class="line">tar -zxvf go1<span class="number">.19</span><span class="number">.4</span>.linux-amd64.tar.gz -c /usr/local/</span><br><span class="line"><span class="comment">// 创建工作目录</span></span><br><span class="line">mkdir -p <span class="keyword">go</span>/src <span class="keyword">go</span>/bin <span class="keyword">go</span>/pkg</span><br><span class="line"><span class="comment">// 使用vim编辑配置文件</span></span><br><span class="line">vi /etc/profile</span><br><span class="line"><span class="comment">// 添加以下内容</span></span><br><span class="line">export GOROOT=/usr/local/<span class="keyword">go</span>   # 设置Golang的安装路径</span><br><span class="line">export GOPATH=$HOME/<span class="keyword">go</span>        # 设置Golang的工作目录路径</span><br><span class="line">export PATH=$PATH:$GOROOT/bin # 添加到系统变量</span><br><span class="line"><span class="comment">// 保存并退出，并使配置生效</span></span><br><span class="line">source /etc/profile</span><br><span class="line"><span class="comment">// 检查Go环境配置信息以及版本号</span></span><br><span class="line"><span class="keyword">go</span> env</span><br><span class="line"><span class="keyword">go</span> version</span><br><span class="line"><span class="comment">// 配置代理</span></span><br><span class="line"><span class="keyword">go</span> env -w GOPROXY=https:<span class="comment">//goproxy.io</span></span><br><span class="line"><span class="keyword">go</span> env -w GO111MODULE=<span class="string">&quot;on&quot;</span></span><br><span class="line"><span class="comment">// 安装Gin</span></span><br><span class="line"><span class="keyword">go</span> get -u github.com/gin-gonic/gin 或者 <span class="keyword">go</span> install github.com/gin-gonic/gin@latest</span><br><span class="line"><span class="comment">// 创建工作文件夹</span></span><br><span class="line">cd [路径]</span><br><span class="line">mkdir [文件夹名字]</span><br><span class="line">cd [文件夹名字]</span><br><span class="line">vim 文件名</span><br><span class="line"><span class="comment">// 构建并运行</span></span><br><span class="line"><span class="keyword">go</span> build 文件名</span><br><span class="line"><span class="keyword">go</span> run 文件名</span><br><span class="line"><span class="comment">// 打开服务器对应的端口</span></span><br></pre></td></tr></table></figure>

<h4 id="面临问题"><a href="#面临问题" class="headerlink" title="面临问题"></a>面临问题</h4><p>111.go:4:2: no required module provides package github.com&#x2F;gin-gonic&#x2F;gin: go.mod file not found in current directory or any parent directory; see ‘go help modules’</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> mod init [module-name]</span><br></pre></td></tr></table></figure>

<p>要解决这个问题，可以尝试以下几个步骤：</p>
<ol>
<li>确认你的项目目录下有一个名为 <code>go.mod</code> 的文件。如果没有，可以在项目根目录下运行 <code>go mod init [module-name]</code> 命令来创建 <code>go.mod</code> 文件，并指定 <code>module-name</code> 为你的项目名称。</li>
<li>确认你的项目使用的是 Go Modules 进行依赖管理。可以在项目根目录下运行 <code>go env</code> 命令来查看 <code>GO111MODULE</code> 环境变量的值是否为 <code>on</code>。如果不是，可以通过设置 <code>GO111MODULE=on</code> 来启用 Go Modules。</li>
<li>确认你已经在项目中添加了 <code>github.com/gin-gonic/gin</code> 包的依赖。可以在项目根目录下运行 <code>go get github.com/gin-gonic/gin</code> 命令来添加该依赖。</li>
<li>如果以上步骤都没有解决问题，可以尝试删除项目根目录下的 <code>go.mod</code> 和 <code>go.sum</code> 文件，并重新运行 <code>go mod init [module-name]</code> 和 <code>go get github.com/gin-gonic/gin</code> 命令来重新初始化和下载依赖。</li>
</ol>
<h2 id="14、Bind-绑定参数"><a href="#14、Bind-绑定参数" class="headerlink" title="14、Bind 绑定参数"></a>14、Bind 绑定参数</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1s24y1k7pv/?p=14&spm_id_from=pageDriver&vd_source=317bb94c5472927dbf52bd720a0c23c2">14.参数绑定_哔哩哔哩_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1RV4y1z7Jo/?spm_id_from=pageDriver&vd_source=317bb94c5472927dbf52bd720a0c23c2">Go面试-判断两个字符串排序后是否一致_现场撸代码，并讲解思路_哔哩哔哩_bilibili</a></p>
<p>gin 中的 <code>bind</code> 可以很方便地将前端传递来的数据与 <code>结构体</code> 进行 <code>参数绑定</code> 以及参数校验</p>
<h4 id="参数绑定"><a href="#参数绑定" class="headerlink" title="参数绑定"></a>参数绑定</h4><p>在使用这个功能的时候，需要给结构体加上Tag（例如  <code>json </code>  <code>form</code>  <code>uri </code>  <code>xml</code>  <code>yaml</code>）</p>
<h4 id="Must-Bind"><a href="#Must-Bind" class="headerlink" title="Must Bind"></a>Must Bind</h4><p>不用，校验失败会改变状态码</p>
<h4 id="Should-Bind"><a href="#Should-Bind" class="headerlink" title="Should Bind"></a>Should Bind</h4><p>可以绑定json、query、param、yaml 和 xml</p>
<p>如果校验不通过会返回错误</p>
<h4 id="ShouldBindJSON"><a href="#ShouldBindJSON" class="headerlink" title="ShouldBindJSON"></a>ShouldBindJSON</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserInfo <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">	Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">	Sex  <span class="type">string</span> <span class="string">`json:&quot;sex&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	router.POST(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">var</span> userInfo UserInfo</span><br><span class="line">		err := c.ShouldBindJSON(&amp;userInfo)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;Msg&quot;</span>: <span class="string">&quot;Wrong&quot;</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, userInfo)</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:80&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="ShouldBindQuery"><a href="#ShouldBindQuery" class="headerlink" title="ShouldBindQuery"></a>ShouldBindQuery</h4><p>绑定查询参数</p>
<p><code>tag </code> 对应为 <code> form</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserInfo <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span> <span class="string">`json:&quot;name&quot;`</span></span><br><span class="line">	Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot;`</span></span><br><span class="line">	Sex  <span class="type">string</span> <span class="string">`json:&quot;sex&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// params</span></span><br><span class="line">	<span class="comment">// http://localhost/query?name=XuZhixing&amp;age=22&amp;sex=男</span></span><br><span class="line">	router.POST(<span class="string">&quot;/query&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">var</span> userInfo UserInfo</span><br><span class="line">		err := c.ShouldBindQuery(&amp;userInfo)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;Msg&quot;</span>: <span class="string">&quot;Wrong&quot;</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, userInfo)</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:80&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="ShouldBindUri"><a href="#ShouldBindUri" class="headerlink" title="ShouldBindUri"></a>ShouldBindUri</h4><p>绑定动态参数</p>
<p><code>tag</code> 对应 <code>uri</code> </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserInfo <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span> <span class="string">`json:&quot;name&quot; form:&quot;name&quot; uri:&quot;name&quot;`</span></span><br><span class="line">	Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot; form:&quot;age&quot; uri:&quot;age&quot;`</span></span><br><span class="line">	Sex  <span class="type">string</span> <span class="string">`json:&quot;sex&quot; form:&quot;sex&quot; uri:&quot;sex&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	router.POST(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">var</span> userInfo UserInfo</span><br><span class="line">		err := c.ShouldBindJSON(&amp;userInfo)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;Msg&quot;</span>: <span class="string">&quot;Wrong&quot;</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, userInfo)</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// params</span></span><br><span class="line">	<span class="comment">// http://localhost/query?name=XuZhixing&amp;age=22&amp;sex=男</span></span><br><span class="line">	router.POST(<span class="string">&quot;/query&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">var</span> userInfo UserInfo</span><br><span class="line">		err := c.ShouldBindQuery(&amp;userInfo)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;Msg&quot;</span>: <span class="string">&quot;Wrong&quot;</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, userInfo)</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// http://localhost/uri/Xu/23/男</span></span><br><span class="line">	router.POST(<span class="string">&quot;/uri/:name/:age/:sex&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="keyword">var</span> userInfo UserInfo</span><br><span class="line">		err := c.ShouldBindUri(&amp;userInfo)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;Msg&quot;</span>: <span class="string">&quot;Wrong&quot;</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, userInfo)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:80&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="ShouldBind"><a href="#ShouldBind" class="headerlink" title="ShouldBind"></a>ShouldBind</h4><p>会根据请求头中的 <code>Content-Type</code> 去自动绑定</p>
<p><code>form-data</code> 的参数也用这个， <code>tag</code> 用 <code>form</code></p>
<p>默认的 <code>tag</code> 就是 <code>form</code> </p>
<p>绑定 <code>form-data</code> 参数或者 <code>x-www-form-urlencoded</code> 参数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> UserInfo <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span> <span class="string">`json:&quot;name&quot; form:&quot;name&quot; uri:&quot;name&quot;`</span></span><br><span class="line">	Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot; form:&quot;age&quot; uri:&quot;age&quot;`</span></span><br><span class="line">	Sex  <span class="type">string</span> <span class="string">`json:&quot;sex&quot; form:&quot;sex&quot; uri:&quot;sex&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	router.POST(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">var</span> userInfo UserInfo</span><br><span class="line">		err := c.ShouldBindJSON(&amp;userInfo)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;Msg&quot;</span>: <span class="string">&quot;Wrong&quot;</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, userInfo)</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// params</span></span><br><span class="line">	<span class="comment">// http://localhost/query?name=XuZhixing&amp;age=22&amp;sex=男</span></span><br><span class="line">	router.POST(<span class="string">&quot;/query&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">var</span> userInfo UserInfo</span><br><span class="line">		err := c.ShouldBindQuery(&amp;userInfo)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;Msg&quot;</span>: <span class="string">&quot;Wrong&quot;</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, userInfo)</span><br><span class="line"></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// http://localhost/uri/Xu/23/男</span></span><br><span class="line">	router.POST(<span class="string">&quot;/uri/:name/:age/:sex&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="keyword">var</span> userInfo UserInfo</span><br><span class="line">		err := c.ShouldBindUri(&amp;userInfo)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;Msg&quot;</span>: <span class="string">&quot;Wrong&quot;</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, userInfo)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 根据Content-Type</span></span><br><span class="line">	router.POST(<span class="string">&quot;/form&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="keyword">var</span> userInfo UserInfo</span><br><span class="line">		err := c.ShouldBind(&amp;userInfo)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;Msg&quot;</span>: <span class="string">&quot;Wrong&quot;</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, userInfo)</span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:80&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="判断两个给定的字符串排序后是否一致"><a href="#判断两个给定的字符串排序后是否一致" class="headerlink" title="判断两个给定的字符串排序后是否一致"></a>判断两个给定的字符串排序后是否一致</h4><h5 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h5><p>给定两个字符串，请编写程序，确定其中一个字符串的字符重新排列后，能否变成另一个字符串。</p>
<p>这里规定【大小写为不同字符串】，且考虑字符串重点空格，给定一个 <code>string s1</code> 和 <code>string s2</code> 请返回一个 <code>bool</code> ，代表两串是否重新排列后可相同。</p>
<p>保证两串的长度都小于等于5000。</p>
<h5 id="视频讲解"><a href="#视频讲解" class="headerlink" title="视频讲解"></a>视频讲解</h5><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1RV4y1z7Jo/?spm_id_from=pageDriver&vd_source=317bb94c5472927dbf52bd720a0c23c2">Go面试-判断两个字符串排序后是否一致_现场撸代码，并讲解思路_哔哩哔哩_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1cM4y1q7eP/?spm_id_from=333.999.0.0&vd_source=317bb94c5472927dbf52bd720a0c23c2">Go面试-②判断两个字符串排序后是否一致_现场撸代码，并讲解思路_第二种解决思路_哔哩哔哩_bilibili</a></p>
<h5 id="问题解答-1"><a href="#问题解答-1" class="headerlink" title="问题解答"></a>问题解答</h5><p>第一种解法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">matchStr</span><span class="params">(s1, s2 <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	strS1, strS2 := []<span class="type">int32</span>(s1), []<span class="type">int32</span>(s2)</span><br><span class="line">	length1, length2 := <span class="built_in">len</span>(strS1), <span class="built_in">len</span>(strS2)</span><br><span class="line">	<span class="comment">//fmt.Println(strS1)</span></span><br><span class="line">	<span class="comment">//fmt.Println(strS2)</span></span><br><span class="line">	<span class="comment">//fmt.Println(length1)</span></span><br><span class="line">	<span class="comment">//fmt.Println(length2)</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> length1 &gt; <span class="number">5000</span> || length2 &gt; <span class="number">5000</span> || length1 != length2 &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Length is not right!&quot;</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	view := <span class="built_in">make</span>([]<span class="type">bool</span>, length1)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; length1; i++ &#123;</span><br><span class="line">		view[i] = <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//fmt.Println(view)</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; length1; i++ &#123;</span><br><span class="line">		<span class="keyword">for</span> j := <span class="number">0</span>; j &lt; length2; j++ &#123;</span><br><span class="line">			<span class="keyword">if</span> strS1[i] == strS2[j] &amp;&amp; view[i] == <span class="literal">false</span> &#123;</span><br><span class="line">				<span class="comment">//fmt.Printf(&quot;strS1[%d] is %d, strS2[%d] is %d&quot;, i, strS1[i], j, strS2[j])</span></span><br><span class="line">				view[i] = <span class="literal">true</span></span><br><span class="line">				<span class="comment">//fmt.Println(view)</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> k := <span class="number">0</span>; k &lt; length1; k++ &#123;</span><br><span class="line">		<span class="keyword">if</span> view[k] != <span class="literal">true</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s1, s2 <span class="type">string</span></span><br><span class="line">	_, err := fmt.Scan(&amp;s1, &amp;s2)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	isMatch := matchStr(s1, s2)</span><br><span class="line">	<span class="keyword">if</span> isMatch &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Can match!&quot;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">&quot;Can&#x27;t match!&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>第二种解法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkStr</span><span class="params">(s1, s2 <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="comment">// 注意汉语和英语的字节数区别</span></span><br><span class="line">	ss1, ss2 := []<span class="type">rune</span>(s1), []<span class="type">rune</span>(s2)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(ss1) != <span class="built_in">len</span>(ss2) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(s1) &gt; <span class="number">5000</span> || <span class="built_in">len</span>(ss2) &gt; <span class="number">5000</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, val := <span class="keyword">range</span> ss1 &#123;</span><br><span class="line">		<span class="keyword">if</span> strings.Count(s1, <span class="type">string</span>(val)) != strings.Count(s2, <span class="type">string</span>(val)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第三种解法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sortStr</span><span class="params">(s []<span class="type">rune</span>)</span></span> ([]<span class="type">rune</span>, <span class="type">bool</span>) &#123;</span><br><span class="line">	l := <span class="built_in">len</span>(s)</span><br><span class="line">	isEnd := <span class="literal">true</span></span><br><span class="line">	<span class="keyword">for</span> key, _ := <span class="keyword">range</span> s &#123;</span><br><span class="line">		<span class="keyword">if</span> l<span class="number">-1</span> &gt; key &amp;&amp; s[key] &gt; s[key+<span class="number">1</span>] &#123;</span><br><span class="line">			s[key], s[key+<span class="number">1</span>] = s[key+<span class="number">1</span>], s[key]</span><br><span class="line">			isEnd = <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> isEnd &#123;</span><br><span class="line">		<span class="keyword">return</span> s, isEnd</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> sortStr(s)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">checkStr2</span><span class="params">(s1, s2 <span class="type">string</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">    <span class="comment">// 先进行排序，再进行比较</span></span><br><span class="line">	ss1, _ := sortStr([]<span class="type">rune</span>(s1))</span><br><span class="line">	ss2, _ := sortStr([]<span class="type">rune</span>(s2))</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> <span class="type">string</span>(ss1) == <span class="type">string</span>(ss2) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第四种解法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 利用map进行统计（个人认为比较麻烦）</span></span><br></pre></td></tr></table></figure>

<h5 id="源码参考-1"><a href="#源码参考-1" class="headerlink" title="源码参考"></a>源码参考</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无</span></span><br></pre></td></tr></table></figure>

<h2 id="Bind-绑定器"><a href="#Bind-绑定器" class="headerlink" title="Bind 绑定器"></a>Bind 绑定器</h2><p>需要使用参数验证功能，需要加 <code>binding: tag</code> </p>
<h4 id="15、常用验证器"><a href="#15、常用验证器" class="headerlink" title="15、常用验证器"></a>15、常用验证器</h4><table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">含义</th>
<th align="center">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">required</td>
<td align="center">必填字段（不能为空，并且不能没有这个字段）</td>
<td align="center"><code>binding:&quot;required&quot;</code></td>
</tr>
<tr>
<td align="center">min</td>
<td align="center">最小长度（字符串）</td>
<td align="center"><code>binding:&quot;min=5&quot;</code></td>
</tr>
<tr>
<td align="center">max</td>
<td align="center">最大长度（字符串）</td>
<td align="center"><code>binding:&quot;max=10&quot;</code></td>
</tr>
<tr>
<td align="center">len</td>
<td align="center">长度（字符串）</td>
<td align="center"><code>binding:&quot;len=6&quot;</code></td>
</tr>
<tr>
<td align="center">eq</td>
<td align="center">等于（数字）</td>
<td align="center"><code>binding:&quot;eq=3&quot;</code></td>
</tr>
<tr>
<td align="center">ne</td>
<td align="center">不等于（数字）</td>
<td align="center"><code>binding:&quot;ne=12&quot;</code></td>
</tr>
<tr>
<td align="center">gt</td>
<td align="center">大于（数字）</td>
<td align="center"><code>binding:&quot;gt=10&quot;</code></td>
</tr>
<tr>
<td align="center">gte</td>
<td align="center">大于等于（数字）</td>
<td align="center"><code>binding:&quot;gte=10&quot;</code></td>
</tr>
<tr>
<td align="center">lt</td>
<td align="center">小于（数字）</td>
<td align="center"><code>binding:&quot;lt=10&quot;</code></td>
</tr>
<tr>
<td align="center">lte</td>
<td align="center">小于等于（数字）</td>
<td align="center"><code>binding:&quot;lte=10&quot;</code></td>
</tr>
<tr>
<td align="center">eqfield</td>
<td align="center">等于其他字段的值（同级字段）</td>
<td align="center">Password string <code>binding:&quot;eqfield=ConfirmPassword&quot;</code></td>
</tr>
<tr>
<td align="center">nefield</td>
<td align="center">不等于其他字段的值（同级字段）</td>
<td align="center">Password string <code>binding:&quot;nefield=ConfirmPassword&quot;</code></td>
</tr>
<tr>
<td align="center">-</td>
<td align="center">忽略字段</td>
<td align="center"><code>binding:&quot;-&quot;</code></td>
</tr>
</tbody></table>
<h4 id="16、gin-内置验证器"><a href="#16、gin-内置验证器" class="headerlink" title="16、gin 内置验证器"></a>16、gin 内置验证器</h4><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 枚举 只能是集合中的元素</span></span><br><span class="line">Sex  <span class="type">string</span> <span class="string">`json:&quot;sex&quot; binding:&quot;oneof=man woman&quot;`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串</span></span><br><span class="line">Name <span class="type">string</span> <span class="string">`json:&quot;name&quot; binding:&quot;contians=Xu&quot;`</span> <span class="comment">// 包含 Xu 的字符串</span></span><br><span class="line">exclude <span class="comment">// 不包含</span></span><br><span class="line">startswith <span class="comment">// 字符串前缀</span></span><br><span class="line">endswith <span class="comment">// 字符串后缀</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组</span></span><br><span class="line">dive <span class="comment">// dive 后面的验证就是针对数组中的每一个元素</span></span><br><span class="line">LikeList []<span class="type">string</span> <span class="string">`json:&quot;like_list&quot; binding:&quot;required,dive,required,startswith=like&quot;`</span></span><br><span class="line"><span class="comment">// dive 后面的 required 指的数组元素存在且不为空</span></span><br><span class="line"><span class="comment">// 如果数组本身为空，但是存在头指针和长度，这时可以通过 required 的判断</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 网络验证</span></span><br><span class="line">ip <span class="comment">// binding:&quot;ip&quot; 255.255.255.255</span></span><br><span class="line">ipv4</span><br><span class="line">ipv6</span><br><span class="line">uri <span class="comment">// uri 在于 I(Identifier) 是统一资源标识符，可以唯一标识一个资源</span></span><br><span class="line"><span class="comment">// uri的范围比url的范围大；uri是url的父级，url继承了uri</span></span><br><span class="line">url <span class="comment">// url 在于 Locater，是统一资源定位符，提供找到该资源的确切路径</span></span><br><span class="line"><span class="comment">// &quot;url&quot;: &quot;https://www.cctv.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期验证（出现问题）</span></span><br><span class="line">datetime=<span class="number">2023</span><span class="number">-06</span><span class="number">-19</span> </span><br><span class="line"><span class="comment">// Date     string   `json:&quot;date&quot; binding:&quot;datetime=2006-01-02 15:04:05&quot;`</span></span><br><span class="line"><span class="comment">// 1月2日下午三点4分5秒在2006年</span></span><br></pre></td></tr></table></figure>

<h4 id="17、自定义验证的错误信息"><a href="#17、自定义验证的错误信息" class="headerlink" title="17、自定义验证的错误信息"></a>17、自定义验证的错误信息</h4><p>当验证不通过时，会给出错误的信息，但是原始的错误信息不太友好，不利于用户查看</p>
<p>只需要给结构体加一个 <code>msg</code> 的 <code>tag</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">			Name <span class="type">string</span> <span class="string">`json:&quot;name&quot; binding:&quot;required&quot; msg:&quot;用户姓名校验失败&quot;`</span></span><br><span class="line">			Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot; binding:&quot;required&quot; msg:&quot;用户年龄校验失败&quot;`</span></span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<p>当出现错误时，就可以来获取出错误字段上的msg</p>
<p><code>err</code> ：这个参数为 <code>ShouldBindJSON</code> 返回的错误信息</p>
<p><code>obj</code> ：这个参数为绑定的结构体指针</p>
<p>注意：<code>validator</code> 这个包要引用 <code>v10</code> 这个版本，否则会出错</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GetValidMsg 获取结构体中的 msg 参数</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetValidMsg</span><span class="params">(err <span class="type">error</span>, obj any)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	<span class="comment">// 使用者使用时，需要传递 obj 的指针</span></span><br><span class="line">	getObj := reflect.TypeOf(obj)</span><br><span class="line">	<span class="comment">// 将 err 接口断言为具体类型</span></span><br><span class="line">	<span class="keyword">if</span> errs, ok := err.(validator.ValidationErrors); ok &#123;</span><br><span class="line">		<span class="comment">// 断言成功</span></span><br><span class="line">		<span class="keyword">for</span> _, e := <span class="keyword">range</span> errs &#123;</span><br><span class="line">			<span class="keyword">if</span> f, exits := getObj.Elem().FieldByName(e.Field()); exits &#123;</span><br><span class="line">				msg := f.Tag.Get(<span class="string">&quot;msg&quot;</span>)</span><br><span class="line">				<span class="keyword">return</span> msg</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">return</span> err.Error()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>具体代码</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/go-playground/validator/v10&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	router.POST(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">			Name <span class="type">string</span> <span class="string">`json:&quot;name&quot; binding:&quot;required&quot; msg:&quot;用户姓名校验失败&quot;`</span></span><br><span class="line">			Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot; binding:&quot;required&quot; msg:&quot;用户年龄校验失败&quot;`</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">var</span> user User</span><br><span class="line">		err := c.ShouldBindJSON(&amp;user)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"></span><br><span class="line">			getObj := reflect.TypeOf(&amp;user)</span><br><span class="line">			<span class="comment">// 将err接口断言为具体类型</span></span><br><span class="line">			<span class="keyword">if</span> errors, ok := err.(validator.ValidationErrors); ok &#123;</span><br><span class="line">				<span class="comment">// 断言成功</span></span><br><span class="line">				<span class="keyword">for</span> _, fieldError := <span class="keyword">range</span> errors &#123;</span><br><span class="line">					<span class="comment">// 循环每一个错误信息</span></span><br><span class="line">					<span class="comment">// 根据报错字段名获取结构体的具体字段</span></span><br><span class="line">					<span class="keyword">if</span> f, exits := getObj.Elem().FieldByName(fieldError.Field()); exits &#123;</span><br><span class="line">						msg := f.Tag.Get(<span class="string">&quot;msg&quot;</span>)</span><br><span class="line">						fmt.Println(msg)</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;msg&quot;</span>: err.Error(),</span><br><span class="line">			&#125;)</span><br><span class="line"></span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;data&quot;</span>: user,</span><br><span class="line">		&#125;)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:80&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="18、自定义验证器"><a href="#18、自定义验证器" class="headerlink" title="18、自定义验证器"></a>18、自定义验证器</h4><ol>
<li><p>注册验证器函数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &quot;github.com/go-playground/validator/v10&quot;</span></span><br><span class="line"><span class="comment">// 注意这个版本需要是v10的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> v, ok := binding.Validator.Engine().(*validator.Validate); ok &#123;</span><br><span class="line">		err := v.RegisterValidation(<span class="string">&quot;sign&quot;</span>, signValid)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>编写函数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">signValid</span><span class="params">(fl validator.FieldLevel)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> nameList []<span class="type">string</span> = []<span class="type">string</span>&#123;<span class="string">&quot;Fend&quot;</span>, <span class="string">&quot;Xu&quot;</span>, <span class="string">&quot;Zhang&quot;</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> _, nameStr := <span class="keyword">range</span> nameList &#123;</span><br><span class="line">		name := fl.Field().Interface().(<span class="type">string</span>)</span><br><span class="line">		<span class="keyword">if</span> name == nameStr &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span> <span class="string">`json:&quot;name&quot; binding:&quot;required,sign&quot; msg:&quot;姓名校验失败&quot;`</span></span><br><span class="line">	Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot; binding:&quot;required&quot; msg:&quot;年龄校验失败&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>具体代码</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/gin-gonic/gin/binding&quot;</span></span><br><span class="line">	<span class="string">&quot;github.com/go-playground/validator/v10&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;reflect&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">	Name <span class="type">string</span> <span class="string">`json:&quot;name&quot; binding:&quot;required,sign&quot; msg:&quot;姓名校验失败&quot;`</span></span><br><span class="line">	Age  <span class="type">int</span>    <span class="string">`json:&quot;age&quot; binding:&quot;required&quot; msg:&quot;年龄校验失败&quot;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">ToGetValidMsg</span><span class="params">(err <span class="type">error</span>, obj any)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	getObj := reflect.TypeOf(obj)</span><br><span class="line">	<span class="keyword">if</span> errs, ok := err.(validator.ValidationErrors); ok &#123;</span><br><span class="line">		<span class="keyword">for</span> _, e := <span class="keyword">range</span> errs &#123;</span><br><span class="line">			<span class="keyword">if</span> f, exits := getObj.Elem().FieldByName(e.Field()); exits &#123;</span><br><span class="line">				msg := f.Tag.Get(<span class="string">&quot;msg&quot;</span>)</span><br><span class="line">				<span class="keyword">return</span> msg</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> err.Error()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">signValid</span><span class="params">(fl validator.FieldLevel)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> nameList []<span class="type">string</span> = []<span class="type">string</span>&#123;<span class="string">&quot;Fend&quot;</span>, <span class="string">&quot;Xu&quot;</span>, <span class="string">&quot;Zhang&quot;</span>&#125;</span><br><span class="line">	<span class="keyword">for</span> _, nameStr := <span class="keyword">range</span> nameList &#123;</span><br><span class="line">		name := fl.Field().Interface().(<span class="type">string</span>)</span><br><span class="line">		<span class="keyword">if</span> name == nameStr &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	router := gin.Default()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> v, ok := binding.Validator.Engine().(*validator.Validate); ok &#123;</span><br><span class="line">		err := v.RegisterValidation(<span class="string">&quot;sign&quot;</span>, signValid)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Println(err)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	router.POST(<span class="string">&quot;/&quot;</span>, <span class="function"><span class="keyword">func</span><span class="params">(c *gin.Context)</span></span> &#123;</span><br><span class="line">		<span class="keyword">var</span> user User</span><br><span class="line">		err := c.ShouldBindJSON(&amp;user)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">				<span class="string">&quot;msg&quot;</span>: ToGetValidMsg(err, &amp;user),</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		&#125;</span><br><span class="line">		c.JSON(http.StatusOK, gin.H&#123;</span><br><span class="line">			<span class="string">&quot;data&quot;</span>: user,</span><br><span class="line">		&#125;)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;)</span><br><span class="line"></span><br><span class="line">	err := router.Run(<span class="string">&quot;:80&quot;</span>)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Println(err)</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="字符串替换问题"><a href="#字符串替换问题" class="headerlink" title="字符串替换问题"></a>字符串替换问题</h4><h5 id="问题描述-2"><a href="#问题描述-2" class="headerlink" title="问题描述"></a>问题描述</h5><p>请编写一个方法，将字符串中的空格全部替换为”%20“。</p>
<p>假定该字符串有足够的空间存放新增的字符，并且知道字符串的真是长度(小于等于1000)，同时保证字符串由【大小写的英文字母组成】。</p>
<p>给定一个 <code>string</code> 为原始的串，返回替换后的 <code>string</code></p>
<h5 id="视频讲解-1"><a href="#视频讲解-1" class="headerlink" title="视频讲解"></a>视频讲解</h5><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV11k4y1L78o/?spm_id_from=pageDriver&vd_source=317bb94c5472927dbf52bd720a0c23c2">Go面试-字符串替换并判断是否全是字母或空格_现场撸代码，并讲解思路_哔哩哔哩_bilibili</a></p>
<h5 id="问题解答-2"><a href="#问题解答-2" class="headerlink" title="问题解答"></a>问题解答</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字符串的头部</span></span><br><span class="line"><span class="keyword">type</span> StringHeader <span class="keyword">struct</span> &#123;</span><br><span class="line">	Data <span class="type">uintptr</span></span><br><span class="line">	Len  <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Uintptr是一个足够大的整数类型，可以保存任何指针的位模式。</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">replaceStr</span><span class="params">(s <span class="type">string</span>)</span></span> (<span class="type">string</span>, <span class="type">bool</span>) &#123;</span><br><span class="line">	strS1 := []<span class="type">rune</span>(s)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(strS1) &gt; <span class="number">1000</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Beyond max length&quot;</span>, <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> strS2 []<span class="type">rune</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> strS3 = []<span class="type">rune</span>(<span class="string">&quot;%20&quot;</span>)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> _, val := <span class="keyword">range</span> strS1 &#123;</span><br><span class="line">		<span class="keyword">if</span> val != <span class="string">&#x27; &#x27;</span> &amp;&amp; (val &gt; <span class="string">&#x27;Z&#x27;</span> || val &lt; <span class="string">&#x27;A&#x27;</span>) &amp;&amp; (val &gt; <span class="string">&#x27;z&#x27;</span> || val &lt; <span class="string">&#x27;a&#x27;</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="type">string</span>(val), <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> val != <span class="string">&#x27; &#x27;</span> &#123;</span><br><span class="line">			strS2 = <span class="built_in">append</span>(strS2, val)</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			strS2 = <span class="built_in">append</span>(strS2, strS3...)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="type">string</span>(strS2), <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="源码参考-2"><a href="#源码参考-2" class="headerlink" title="源码参考"></a>源码参考</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">replaceBlank</span><span class="params">(s <span class="type">string</span>)</span></span> (<span class="type">string</span>, <span class="type">bool</span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>([]<span class="type">rune</span>(s)) &gt; <span class="number">1000</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> s, <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> _, v := <span class="keyword">range</span> s &#123;</span><br><span class="line">		<span class="keyword">if</span> <span class="type">string</span>(v) != <span class="string">&quot; &quot;</span> &amp;&amp; unicode.IsLetter(v) == <span class="literal">false</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> s, <span class="literal">false</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> strings.Replace(s, <span class="string">&quot; &quot;</span>, <span class="string">&quot;%20&quot;</span>, <span class="number">-1</span>), <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/06/22/Gin/" data-id="clmqffzcr0007islq449g8zcx" data-title="高性能web框架gin" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Golang/" rel="tag">Golang</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/09/11/hello-world/" class="article-date">
  <time class="dt-published" datetime="2022-09-11T08:11:15.059Z" itemprop="datePublished">2022-09-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/09/11/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/09/11/hello-world/" data-id="clmqffzck0003islq7p9ebelo" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ECMA6-Map/" rel="tag">ECMA6, Map</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Golang/" rel="tag">Golang</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ECMA6-Map/" style="font-size: 10px;">ECMA6, Map</a> <a href="/tags/Golang/" style="font-size: 20px;">Golang</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">September 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">June 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/09/19/ECMA6-11-3-Map/">ECMA6_11.3_Map</a>
          </li>
        
          <li>
            <a href="/2023/07/15/19%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/06/22/Gin/">高性能web框架gin</a>
          </li>
        
          <li>
            <a href="/2022/09/11/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 Xu ZhiXing<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>